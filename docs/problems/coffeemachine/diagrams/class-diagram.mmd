classDiagram

    class Ingredient {
        <<enumeration>>
        COFFEE
        MILK
        WATER
        SUGAR
    }

    class Beverage {
        <<enumeration>>
        ESPRESSO
        LATTE
        CAPPUCCINO
        AMERICANO
    }

    class CoffeeMachine {
        -final Map~Ingredient,Integer~ inventory
        -final Map<Beverage, Map~Ingredient,Integer~> recipes
        +makeBeverage() boolean
        +refill() void
    }

    class Demo {
        +main() static void
    }

    class CoffeeMachineImpl {
        -final IngredientContainer container
        -final Map~BeverageType,Beverage~ menu
        -final Map~String,Order~ orders
        +getMenu() List~Beverage~
        +placeOrder() Order
        +processPayment() boolean
        +refillIngredient() void
        +checkIngredients() Map<Ingredient, Integer>
    }

    class IngredientContainer {
        -final Map~Ingredient,Integer~ quantities
        -final Map~Ingredient,Integer~ maxCapacity
        +hasIngredients() synchronized boolean
        +consume() synchronized boolean
        +refill() synchronized void
        +getQuantity() int
        +getAllQuantities() Map<Ingredient, Integer>
    }

    class Order {
        -final String id
        -final Beverage beverage
        -final LocalDateTime orderTime
        -OrderStatus status
        +complete() void
        +fail() void
        +getId() String
        +getBeverage() Beverage
        +getStatus() OrderStatus
    }

    class Payment {
        -final String id
        -final String orderId
        -final BigDecimal amount
        -final PaymentMethod method
        +getId() String
        +getAmount() BigDecimal
        +getMethod() PaymentMethod
    }

    class Ingredient {
        <<enumeration>>
        COFFEE
        MILK
        WATER
        SUGAR
    }

    class OrderStatus {
        <<enumeration>>
        PENDING
        CONFIRMED
        PROCESSING
        SHIPPED
        DELIVERED
        CANCELLED
        RETURNED
    }

    class PaymentMethod {
        <<enumeration>>
        CREDIT_CARD
        DEBIT_CARD
        UPI
        NET_BANKING
        WALLET
        CASH_ON_DELIVERY
    }

    class Beverage {
        -final BeverageType type
        -final String name
        -final BigDecimal price
        -final Map~Ingredient,Integer~ recipe
        +getType() BeverageType
        +getName() String
        +getPrice() BigDecimal
        +getRecipe() Map<Ingredient, Integer>
    }

    class BeverageType {
        <<enumeration>>
        ESPRESSO
        LATTE
        CAPPUCCINO
        AMERICANO
        MOCHA
    }

    class CoffeeMachine {
        <<interface>>
        +selectBeverage(type) void
        +insertMoney(amount) void
        +dispense() Beverage
    }

    CoffeeMachineImpl --> IngredientContainer
    CoffeeMachineImpl "1" --> "*" Beverage
    CoffeeMachineImpl "1" --> "*" Order
    CoffeeMachineImpl --> BeverageType
    CoffeeMachineImpl --> Payment
    CoffeeMachineImpl --> Ingredient
    Order --> Beverage
    Order --> OrderStatus
    IngredientContainer --> Ingredient
    Payment --> Order
    Payment --> PaymentMethod
    Beverage --> BeverageType
