classDiagram

    class ParkingTicket {
        -static final long: serialVersionUID
        -String: ticketId
        -Vehicle: vehicle
        -ParkingSpace: parkingSpace
        -LocalDateTime: entryTime
        -LocalDateTime: exitTime
        -boolean: isActive
        +markExit(): void
        +calculateDuration(): Duration
        +isValid(): boolean
        +getTicketId(): String
        +getVehicle(): Vehicle
        +getParkingSpace(): ParkingSpace
        +getEntryTime(): LocalDateTime
        +getExitTime(): LocalDateTime
    }

    class ParkingSpace {
        -static final long: serialVersionUID
        -String: spaceId
        -SpaceType: spaceType
        -int: floorNumber
        -boolean: isOccupied
        -Vehicle: currentVehicle
        +occupy(): synchronized boolean
        +vacate(): synchronized Vehicle
        +canFit(): boolean
        +canFit(): boolean
        +getSpaceId(): String
        +getSpaceType(): SpaceType
        +getFloorNumber(): int
        +isOccupied(): boolean
    }

    class PaymentStatus {
        <<enumeration>>
        -String: description
        +getDescription(): String
        +isTerminal(): boolean
    }

    class Payment {
        -static final long: serialVersionUID
        -String: paymentId
        -ParkingTicket: ticket
        -Money: amount
        -PaymentMethod: paymentMethod
        -PaymentStatus: status
        -LocalDateTime: timestamp
        -String: transactionReference
        +markCompleted(): void
        +markFailed(): void
        +markRefunded(): void
        +getPaymentId(): String
        +getTicket(): ParkingTicket
        +getAmount(): Money
        +getPaymentMethod(): PaymentMethod
        +getStatus(): PaymentStatus
    }

    class SpaceType {
        <<enumeration>>
        -int: capacity
        -String: description
        +getCapacity(): int
        +getDescription(): String
        +canAccommodate(): boolean
    }

    class PaymentMethod {
        <<enumeration>>
        -String: displayName
        +getDisplayName(): String
    }

    class VehicleType {
        <<enumeration>>
        -int: sizeCategory
        +getSizeCategory(): int
    }

    class OccupancyReport {
        -static final long: serialVersionUID
        -LocalDateTime: timestamp
        -int: totalSpaces
        -int: occupiedSpaces
        -Map~SpaceType, Integer~: availableByType
        -Map~SpaceType, Integer~: occupiedByType
        +getTimestamp(): LocalDateTime
        +getTotalSpaces(): int
        +getOccupiedSpaces(): int
        +getAvailableSpaces(): int
        +getOccupancyRate(): double
        +getAvailableByType(): Map<SpaceType, Integer>
        +getOccupiedByType(): Map<SpaceType, Integer>
        +getAvailableSpaces(): int
    }

    class Vehicle {
        -static final long: serialVersionUID
        -String: licenseNumber
        -VehicleType: vehicleType
        -boolean: hasDisabledPermit
        +getLicenseNumber(): String
        +getVehicleType(): VehicleType
        +hasDisabledPermit(): boolean
    }

    class for {
        <<interface>>
    }

    class PaymentProcessor {
        <<interface>>
    }

    class handling {
        <<interface>>
    }

    class for {
        <<interface>>
    }

    class InvalidTicketException {
    }

    class PaymentProcessingException {
    }

    class ParkingException {
        <<abstract>>
        -String: errorCode
        +getErrorCode(): String
    }

    class InvalidVehicleException {
    }

    class PaymentFailedException {
    }

    class ParkingFullException {
    }

    class RefundException {

    ParkingSpace --> SpaceType
    ParkingSpace --> Vehicle
    ParkingSpace --> VehicleType
    SpaceType --> VehicleType
    ParkingTicket --> Vehicle
    ParkingTicket --> ParkingSpace
    OccupancyReport --> SpaceType
    Vehicle --> VehicleType
    Payment --> ParkingTicket
    Payment --> PaymentMethod
    Payment --> PaymentStatus
