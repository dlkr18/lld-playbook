classDiagram

    class PaymentStatus {
        <<enumeration>>
        PENDING
        PROCESSING
        COMPLETED
        FAILED
        REFUNDED
    }

    class PaymentGatewayDemo {
        +main() static void
    }

    class PaymentResult {
        -final String transactionId
        -final PaymentStatus status
        -final String message
        +getTransactionId() String
        +getStatus() PaymentStatus
        +getMessage() String
    }

    class InMemoryPaymentGatewayService {
        -Map~String,Transaction~ transactions
        +processPayment() Transaction
        +getTransaction() Transaction
        +processRefund() Refund
    }

    class RefundNotFoundException {
        -String message
        -Throwable cause
        +RefundNotFoundException(message)
        +getMessage() String
    }

    class InvalidCardException {
        -String message
        -Throwable cause
        +InvalidCardException(message)
        +getMessage() String
    }

    class InsufficientFundsException {
        -String message
        -Throwable cause
        +InsufficientFundsException(message)
        +getMessage() String
    }

    class TransactionFailedException {
        -String message
        -Throwable cause
        +TransactionFailedException(message)
        +getMessage() String
    }

    class TransactionStatus {
        <<enumeration>>
        PENDING
        PROCESSING
        COMPLETED
        FAILED
        CANCELLED
    }

    class Customer {
        -String customerId, name, email
        +getCustomerId() String
    }

    class Refund {
        -String refundId
        -String transactionId
        -double amount
        -RefundStatus status
        +getRefundId() String
        +getTransactionId() String
        +getAmount() double
        +getStatus() RefundStatus
        +setStatus() void
    }

    class Card {
        -String cardNumber, cvv, expiryDate
        +getCardNumber() String
        +isValid() boolean
    }

    class BankAccount {
        -String accountNumber, ifsc
        +getAccountNumber() String
    }

    class PaymentMethod {
        <<enumeration>>
        CREDIT_CARD
        DEBIT_CARD
        UPI
        NET_BANKING
        WALLET
        CASH_ON_DELIVERY
    }

    class Merchant {
        -String merchantId, name, email
        +getMerchantId() String
    }

    class RefundStatus {
        <<enumeration>>
        PENDING
        APPROVED
        REJECTED
        COMPLETED
    }

    class Transaction {
        -String transactionId, merchantId, customerId
        -double amount
        -TransactionStatus status
        -LocalDateTime createdAt
        +getTransactionId() String
        +getAmount() double
        +getStatus() TransactionStatus
        +setStatus() void
    }

    class PaymentGatewayService {
        <<interface>>
        +processPayment(payment) String
        +refund(paymentId) void
        +getPaymentStatus(paymentId) PaymentStatus
    }

    Transaction --> TransactionStatus
    PaymentResult --> Transaction
    PaymentResult --> PaymentStatus
    Refund --> Transaction
    Refund --> RefundStatus
    InMemoryPaymentGatewayService "1" --> "*" Transaction
    InMemoryPaymentGatewayService --> PaymentMethod
    InMemoryPaymentGatewayService --> Refund
